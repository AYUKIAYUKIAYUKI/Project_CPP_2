//============================================================================
//
// プレイヤー壁ずりステート [player_state_wall.cpp]
// Author : 福田歩希
//
//============================================================================

//****************************************************
// インクルードファイル
//****************************************************
#include "player_state_wall.h"
#include "player_state_default.h"
#include "player_state_jump.h"
#include "player_state_damage.h"
#include "collision.h"

// インプット取得用
#include "manager.h"

// フィールド情報
#include "field_manager.h"

//****************************************************
// usingディレクティブ
//****************************************************
using namespace abbr;

//============================================================================
// 
// publicメンバ
// 
//============================================================================

//============================================================================
// コンストラクタ
//============================================================================
CPlayer_State_Wall::CPlayer_State_Wall() :
	CPlayer_State{}
{

}

//============================================================================
// デストラクタ
//============================================================================
CPlayer_State_Wall::~CPlayer_State_Wall()
{

}

//============================================================================
// 更新処理
//============================================================================
void CPlayer_State_Wall::Update()
{
	// プレイヤーステートクラスの更新処理
	CPlayer_State::Update();

	// 重力の補正
	AdjustGravity();
}

//============================================================================
// 通常状態へ
//============================================================================
void CPlayer_State_Wall::To_Default()
{
	if (GetNextState() == nullptr)
	{
		SetNextState(DBG_NEW CPlayer_State_Default());
	}
}

//============================================================================
// ジャンプ状態へ
//============================================================================
void CPlayer_State_Wall::To_Jump()
{
	if (GetNextState() == nullptr)
	{
		SetNextState(DBG_NEW CPlayer_State_Jump());
	}
}

//============================================================================
// ダメージ状態へ
//============================================================================
void CPlayer_State_Wall::To_Damage()
{
	if (GetNextState() == nullptr)
	{
		SetNextState(DBG_NEW CPlayer_State_Damage());
	}
}

//============================================================================
// 
// privateメンバ
// 
//============================================================================

//============================================================================
// 重力の補正
//============================================================================
void CPlayer_State_Wall::AdjustGravity()
{
	// 重力をかなり低減する
	m_pCharacter->SetVelY(CField_Manager::FIELD_GRAVITY * 0.1f);
}